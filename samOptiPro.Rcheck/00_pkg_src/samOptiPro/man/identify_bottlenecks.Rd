% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/assess.R
\name{identify_bottlenecks}
\alias{identify_bottlenecks}
\title{Identify per-parameter bottlenecks (low ESS/s, low ESS per draw, long time-to-target)}
\usage{
identify_bottlenecks(
  samples,
  runtime_s,
  ess_threshold = 1000,
  sampler_params = NULL,
  model = NULL,
  mcmc_conf = NULL,
  ignore_patterns = c("^lifted_", "^logProb_"),
  strict_sampler_only = TRUE,
  auto_configure = TRUE,
  rhat_threshold = 1.01,
  ess_per_s_min = 0
)
}
\arguments{
\item{samples}{An object of class \code{mcmc.list}, \code{mcmc}, \code{matrix},
or \code{data.frame}.}

\item{runtime_s}{Numeric scalar. Total wall-clock time of the MCMC run (in seconds).}

\item{ess_threshold}{Numeric scalar. Target ESS per parameter used to compute
time-to-target. Default is 1000.}

\item{sampler_params}{Optional character vector of parameter names to retain.
If provided, other parameters are ignored.}

\item{rhat_threshold}{Numeric scalar. Provided for API symmetry but not used
in ranking. Default is NULL.}

\item{ess_per_s_min}{Numeric scalar. Optional threshold for computational
efficiency. Parameters with CE below this value are flagged. Set to 0
(default) to disable.}
}
\value{
A list with the following elements:
\describe{
\item{\code{type}}{Character string. Either "ok" or "degenerate_only".}
\item{\code{details}}{List containing CE, AE, time-to-target, and degenerate sets.}
\item{\code{per_param}}{Data frame with metrics for each parameter.}
\item{\code{summary}}{Data frame summarizing the worst parameters.}
\item{\code{top3}}{Data frame containing the three worst parameters according to CE.}
}
}
\description{
This function ranks parameters according to three metrics:
\itemize{
\item Computational efficiency (CE), defined as ESS per second (low values indicate bottlenecks).
\item Algorithmic efficiency (AE), defined as ESS per post-burnin draw (low values indicate bottlenecks).
\item Time-to-target, defined as the time required to reach a given ESS threshold at the current CE
(high values indicate bottlenecks).
}
}
\details{
Parameters with non-finite or non-positive ESS, AE, or CE are collected in the
\code{degenerate} field of the output and excluded from the rankings.

When \code{sampler_params} is provided, rankings are restricted to the specified
parameter names. This is typically used to exclude deterministic monitors and
retain only stochastic nodes that have associated samplers.
}
\keyword{internal}
