% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hmc_wrappers.R
\name{configure_hmc_safely}
\alias{configure_hmc_safely}
\title{Configure and run HMC/NUTS safely}
\usage{
configure_hmc_safely(
  build_fn,
  niter,
  nburnin,
  thin,
  monitors,
  nchains,
  out_dir = NULL
)
}
\arguments{
\item{build_fn}{A function that builds the model and returns at least
a list with components \code{model} and \code{conf}.}

\item{niter, nburnin, thin}{Integers; MCMC iterations, burn-in, and thinning.}

\item{monitors}{Character vector of node names to monitor.}

\item{nchains}{Integer; number of chains to run.}

\item{out_dir}{Character or \code{NULL}; if not \code{NULL}, figures are saved there.}
}
\value{
A list with elements:
\describe{
\item{conf}{The configured MCMC configuration.}
\item{res}{Raw run output (samples, runtime, â€¦).}
\item{diag_tbl}{A data frame of diagnostics (e.g., R-hat, ESS/s).}
}
}
\description{
Sets up an HMC/NUTS configuration via \pkg{nimbleHMC}, compiles the MCMC,
runs it, and returns basic diagnostics.
}
\examples{
\dontrun{
  out <- configure_hmc_safely(
    build_fn = my_build_fn, niter = 2000, nburnin = 1000, thin = 1,
    monitors = c("beta[1]", "sigma"), nchains = 4, out_dir = "outputs"
  )
  out$diag_tbl
}
}
\keyword{internal}
