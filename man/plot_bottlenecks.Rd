% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plots.R
\name{plot_bottlenecks}
\alias{plot_bottlenecks}
\title{Plot bottlenecks (targets & families) with AE/CE, total time, and R-hat}
\usage{
plot_bottlenecks(
  diag_tbl,
  out_dir = "outputs/diagnostics",
  top_k = 20L,
  rhat_ref = 1.05,
  make_time_targets = TRUE,
  make_esss_targets = TRUE,
  make_esss_families = TRUE,
  make_time_families = TRUE,
  make_rhat_hist_targets = TRUE,
  make_rhat_worst_targets = TRUE,
  make_rhat_median_families = TRUE,
  make_hist_ae_families = FALSE,
  make_hist_ce_families = FALSE
)
}
\arguments{
\item{diag_tbl}{Data frame with columns (flexible names supported):
\itemize{
\item \code{target} (if absent, rownames are used),
\item \code{AE} or \code{AE_ESS_per_it} (ESS/iter; small = worse),
\item \code{CE} or \code{ESS_per_sec} or \code{ess_per_s} (ESS/s; small = worse),
\item \code{ESS} or \code{ess} (optional, absolute ESS),
\item \code{time_s} (optional; total seconds per target),
\item \code{Rhat} (optional),
\item \code{Family} (otherwise derived from target prefix before '[').
}}

\item{out_dir}{Output directory (created if missing).}

\item{top_k}{Number of bars to show (worst/top).}

\item{rhat_ref}{Reference R-hat threshold line (default 1.01).}

\item{make_time_targets}{Barplot of top targets by total time.}

\item{make_esss_targets}{Barplot of worst targets by CE (ESS/s).}

\item{make_esss_families}{Barplot of worst families by median CE.}

\item{make_time_families}{Barplot of top families by total time.}

\item{make_rhat_hist_targets}{Histogram of R-hat (targets).}

\item{make_rhat_worst_targets}{Barplot of worst targets by R-hat.}

\item{make_rhat_median_families}{Barplot of median R-hat by family.}

\item{make_hist_ae_families}{Histogram of family medians (AE).}

\item{make_hist_ce_families}{Histogram of family medians (CE).}
}
\value{
(Invisibly) a named list of ggplot objects actually created.
}
\description{
Creates only the requested figures (toggles). If a toggle is FALSE, the
corresponding figure is neither computed nor saved. ECDF and joint
scatter plots are intentionally removed.
}
