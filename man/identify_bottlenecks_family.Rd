% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/assess.R
\name{identify_bottlenecks_family}
\alias{identify_bottlenecks_family}
\title{Identify bottlenecks by parameter stats::family(medians within families)}
\usage{
identify_bottlenecks_family(
  samples,
  runtime_s,
  ess_threshold = 1000,
  sampler_params = NULL,
  model = NULL,
  mcmc_conf = NULL,
  ignore_patterns = c("^lifted_", "^logProb_"),
  strict_sampler_only = TRUE,
  auto_configure = TRUE,
  rhat_threshold = 1.01,
  ess_per_s_min = 0
)
}
\arguments{
\item{samples}{mcmc.list/mcmc/matrix/data.frame.}

\item{runtime_s}{numeric(1) wall time in seconds.}

\item{ess_threshold}{numeric(1) target ESS per stats::family(default 1000).}

\item{sampler_params}{character() optional vector of parameter names to keep.}

\item{rhat_threshold}{numeric(1) kept for API symmetry (not used in ranks).}

\item{ess_per_s_min}{numeric(1) optional CE threshold to flag (0 = inactive).}
}
\value{
list(type="ok" or "degenerate_only",
details=list(ce=..., ae=..., time=..., degenerate=...),
per_family=..., summary=..., top3=data.frame)
identify_bottlenecks_family
}
\description{
Parameters are grouped by stats::family(prefix before the first \code{[}), then family-level
\strong{medians} are computed:
\itemize{
\item AE_med  = median(AE)            (low = worse),
\item CE_med  = median(CE)            (low = worse, CE = ESS/s),
\item ESS_med = median(ESS),
\item Rhat_med= median(Rhat, na.rm=TRUE).
}
}
\details{
Derived:
\itemize{
\item slow_node_time = ess_threshold / CE_med  (seconds to target; high = worse),
\item meet_target    = slow_node_time <= runtime_s.
}

Families with degenerate metrics (non-finite or non-positive) are listed in \code{degenerate}
and excluded from rankings.

If you pass \code{sampler_params}, only parameters belonging to those names are used to form families.
}
