% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plots.R
\name{plot_bottlenecks_index}
\alias{plot_bottlenecks_index}
\title{Plot diagnostics for stochastic sampler targets (strict) + all-nodes panels}
\usage{
plot_bottlenecks_index(
  diag_tbl,
  out_dir = "outputs/diagnostics",
  top_k = 20L,
  n_worst = 20L,
  bins = 30L,
  rhat_ref = 1.05,
  make_bar_ae_median_all = TRUE,
  make_bar_ce_median_all = TRUE,
  make_bar_ce_worst_all = TRUE,
  make_bar_time_top_all = TRUE,
  make_bar_rhat_worst = TRUE,
  make_bar_ess_q5 = TRUE,
  make_hist_ce = TRUE,
  make_hist_ae = TRUE
)
}
\arguments{
\item{diag_tbl}{data.frame with per-target diagnostics; must contain \code{target} or rownames.
Expected: AE (\code{AE_ESS_per_it} or \code{AE}), CE (\code{ESS_per_sec} or \code{ess_per_s} or \code{CE});
optional \code{ESS}/\code{ess}, \code{time_s}, \code{Rhat}.}

\item{out_dir}{Output directory for figures (PDF + PNG). Default: "outputs/diagnostics".}

\item{top_k}{Bars shown in the “worst/top” all-nodes panels. Default: 20L.}

\item{n_worst}{Rows returned in worst tables. Default: 20L.}

\item{bins}{Kept for API compatibility (AE/CE “hist” are barplots). Default: 30L.}

\item{rhat_ref}{Rhat reference (Rhat-1 axis). Default: 1.05.}

\item{make_bar_ae_median_all, }{make_bar_ce_median_all,
make_bar_ce_worst_all, make_bar_time_top_all
Toggles for the \strong{all-nodes} panels (default TRUE).}

\item{make_bar_rhat_worst, }{make_bar_ess_q5,
make_hist_ce, make_hist_ae Toggles for the existing \strong{sampled-only} panels (default TRUE).}
}
\value{
Invisibly, a list with ggplot objects and worst-node tables.
}
\description{
\itemize{
\item \strong{Sampler-only core}: strictly restrict AE/CE (and related "sampled" panels)
to targets having an MCMC sampler, discovered \emph{inside} via
\code{conf.mcmc$getSamplers()} (or \code{attr(diag_tbl,"mcmc_conf")}, or explicit
\code{attr(diag_tbl,"sampled_targets")}). No "Family" logic anywhere.
\item \strong{All-nodes replacements (this change)}: replace the former sampled-only
panels you listed with \strong{all-nodes} counterparts for the \strong{same metrics}:
\itemize{
\item AE median by Target — \strong{all nodes} (steelblue)
\item CE median by Target — \strong{all nodes} (green)
\item Worst CE — \strong{all nodes} (grey60 + labels)
\item Top Time — \strong{all nodes} (grey40 + labels)
}
}
}
